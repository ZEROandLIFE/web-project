import{r as a,j as e}from"./index-Dhmb56CU.js";import{a as g}from"./order-CF0HguCP.js";const v=()=>{const[o,u]=a.useState([]),[x,l]=a.useState(!0),[d,j]=a.useState(""),[r,m]=a.useState(1),[n,p]=a.useState(1),i=16;a.useEffect(()=>{(async()=>{try{l(!0);const h=(await g()).orders.map(c=>({itemName:c.itemName,createdAt:new Date(c.createdAt).toLocaleString(),boxName:c.boxName,price:c.price}));u(h),p(Math.ceil(h.length/i))}catch(t){console.error("获取仓库物品失败:",t),j("获取仓库物品失败，请稍后重试")}finally{l(!1)}})()},[]);const N=()=>{const s=(r-1)*i,t=s+i;return o.slice(s,t)};return x?e.jsx("div",{className:"warehouse-loading",children:"加载中..."}):d?e.jsx("div",{className:"warehouse-error",children:d}):e.jsxs("div",{className:"warehouse-container",children:[e.jsx("h1",{className:"warehouse-title",children:"我的仓库"}),o.length===0?e.jsx("div",{className:"warehouse-empty",children:"仓库空空如也，快去购买盲盒吧！"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"warehouse-items",children:N().map((s,t)=>e.jsxs("div",{className:"warehouse-item",children:[e.jsx("div",{className:"item-name",children:s.itemName}),e.jsxs("div",{className:"item-details",children:[e.jsxs("span",{children:["来自盲盒: ",s.boxName]}),e.jsxs("span",{children:["购买价格: ¥",s.price]}),e.jsxs("span",{children:["获得时间: ",s.createdAt]})]})]},t))}),n>1&&e.jsxs("div",{className:"pagination",children:[e.jsx("button",{onClick:()=>m(s=>Math.max(1,s-1)),disabled:r===1,children:"上一页"}),e.jsxs("span",{children:["第 ",r," 页 / 共 ",n," 页"]}),e.jsx("button",{onClick:()=>m(s=>Math.min(n,s+1)),disabled:r===n,children:"下一页"})]})]})]})};export{v as default};
